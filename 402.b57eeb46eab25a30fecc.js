(self.webpackChunkimageannotator=self.webpackChunkimageannotator||[]).push([[402],{95318:t=>{t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.default=t.exports,t.exports.__esModule=!0},20862:(t,e,r)=>{var n=r(50008).default;function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var i=a?Object.getOwnPropertyDescriptor(t,s):null;i&&(i.get||i.set)?Object.defineProperty(r,s,i):r[s]=t[s]}return r.default=t,e&&e.set(t,r),r},t.exports.default=t.exports,t.exports.__esModule=!0},50008:t=>{function e(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=e=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),e(r)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0},89875:(t,e,r)=>{"use strict";var n=r(95318),o=r(20862);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(r(77865)),s=(0,n(r(2108)).default)(a.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");e.default=s},64566:(t,e,r)=>{"use strict";var n=r(95318),o=r(20862);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(r(77865)),s=(0,n(r(2108)).default)(a.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");e.default=s},2108:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=r(28546)},35733:(t,e,r)=>{"use strict";r.r(e),r.d(e,{executeQuery:()=>p,getAuthorisedFilesInRepository:()=>x,getStakeholdersFromProject:()=>b,getProjectsFromAggregator:()=>y,getProjectDataFromStakeholder:()=>v,getLBDlocation:()=>j,getAccessRights:()=>m,update:()=>E,findObjectAliases:()=>P,getLocalContexts:()=>A,loadProjectMetadata:()=>u,getProjectId:()=>h,createLBDLocation:()=>R,createProject:()=>M});const n=r(51657),{DataFactory:o}=n,{namedNode:a,literal:s,defaultGraph:i,quad:c}=o,l=r(81092).newEngine,{v4:d}=r(55877);async function p(t,e,r){const o=new n.Store;for(const t of e)try{const e=await r.fetch(t),a=await e.text(),s=new n.Parser;await g(a,o,s,t)}catch(t){console.log(t)}const a="\nprefix ldp: <http://www.w3.org/ns/ldp#> \nprefix lbd: <https://lbdserver.org/vocabulary#>\nprefix dcat: <http://www.w3.org/ns/dcat#>\nprefix owl: <http://www.w3.org/2002/07/owl#> \n "+t,s=l();return await s.query(a,{sources:[o]})}async function f(t,e){const r={};for(const n of e)try{const e=await t.bindings();r[n]=e.map((t=>t.get("?"+n).id)).filter((t=>null!=t))}catch(t){console.log("error",t)}return r}async function u(t,e,r){try{const o=await h(t),a=await b(t,r);for(const t of a){const a=await j(t,r)+o+"/artefactRegistry.ttl",s=await r.fetch(a);if(s){const t=await s.text();if(t){const r=new n.Parser;await g(t,e,r,a+"#")}}else console.log(t,"has no artefact registry")}}catch(t){console.log("error",t)}}function w(t,e){if(t.id.startsWith("http"))return a(t.id);if(t.id.startsWith('"')){const e=t.id.replaceAll('"',"");return s(e)}return a(e+t.id)}function g(t,e,r,n){return new Promise(((o,a)=>{t&&r.parse(t,((t,r,a)=>{if(t&&console.log(t),r){const t=w(r.subject,n),o=w(r.predicate,n),a=w(r.object,n),s=c(t,o,a,i());e.addQuad(s)}else o()}))}))}async function y(t,e){let r=t;r.endsWith("/")||(r+="/");const n=await p("\n  SELECT ?project WHERE {\n    ?s a lbd:Aggregator ;\n      ldp:contains ?project .\n  }",[r],e),{project:o}=await f(n,["project"]);return o}async function h(t,e){return t.split("/")[t.split("/").length-2]}async function b(t,e){let r=t;r.endsWith("/")||(r+="/");const n=`\n  SELECT ?st WHERE {\n    <${t}> a lbd:PartialProject ;\n      lbd:hasMember ?st .\n  }`,o=await p(n,[t],e),{st:a}=await f(o,["st"]);return a}async function v(t,e,r){const n=await j(t,r);e.endsWith("/")||(e+="/");const o=n+e;return{stakeholder:t,data:await x(o,r)}}async function x(t,e){const r=`\n    SELECT ?dataset WHERE {\n      <${t}> ldp:contains ?dataset .\n    }\n  `,n=await p(r,[t],e),{dataset:o}=await f(n,["dataset"]),a=o.filter((t=>t.endsWith("props.ttl"))),s=[];for(const r of a){const n=await m(r,e),o="\n    SELECT ?uri WHERE {\n      ?meta a dcat:Dataset ;\n      dcat:distribution ?dist .\n      ?dist dcat:downloadURL ?uri .\n    }",a=await p(o,[r],e),{uri:i}=await f(a,["uri"]);s.push({artefactRegistry:t+"artefactRegistry.ttl",accessRights:n,metadata:r,main:i[0]})}return s}async function m(t,e){return(await e.fetch(t,{method:"HEAD"})).headers.get("WAC-Allow").split(",")[0].replace("user=","").replaceAll('"',"").split(" ")}async function j(t,e){const r=`\nprefix ldp: <http://www.w3.org/ns/ldp#> \nprefix lbd: <https://lbdserver.org/vocabulary#>\nprefix dcat: <http://www.w3.org/ns/dcat#>\nprefix owl: <http://www.w3.org/2002/07/owl#> \n select ?index where {<${t}> lbd:hasProjectRegistry ?index}`,n=await p(r,[t.replace("#me","")],e);let{index:o}=await f(n,["index"]);return o.length>0?(o[0].endsWith("/")||(o+="/"),o[0]):null}async function E(t,e,r){try{var n={method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:t,redirect:"follow"};let o;return void(o=await r.fetch(e,n))}catch(t){throw console.log("error",t),t}}async function P(t,e,r){const n=`\n  SELECT ?alias WHERE {\n  <${t}> owl:sameAs ?alias .\n  }\n  `,o=await p(n,e,r),{alias:a}=await f(o,["alias"]);return a}async function A(t,e,r){}async function R(t){if(t.info.isLoggedIn){let e=await j(t.info.webId,t);e||(e=t.info.webId.replace("/profile/card#me","/lbd/"));const r=`\nprefix ldp: <http://www.w3.org/ns/ldp#> \nprefix lbd: <https://lbdserver.org/vocabulary#>\nprefix dcat: <http://www.w3.org/ns/dcat#>\nprefix owl: <http://www.w3.org/2002/07/owl#> \n INSERT DATA {\n      <${t.info.webId}> lbd:hasProjectRegistry <${e}> .\n    }`;await E(r,t.info.webId,t);const n=`\nprefix ldp: <http://www.w3.org/ns/ldp#> \nprefix lbd: <https://lbdserver.org/vocabulary#>\nprefix dcat: <http://www.w3.org/ns/dcat#>\nprefix owl: <http://www.w3.org/2002/07/owl#> \n INSERT DATA {\n      <${e}> a lbd:Aggregator .\n    }`;return await E(n,e,t),e}}async function M(t,e,r){if(r.info.isLoggedIn){t||(t=d()),e||(e=[r.info.webId]);let n=await j(r.info.webId,r);n||(n=await R(r));const o=n+t+"/",a=`\nprefix ldp: <http://www.w3.org/ns/ldp#> \nprefix lbd: <https://lbdserver.org/vocabulary#>\nprefix dcat: <http://www.w3.org/ns/dcat#>\nprefix owl: <http://www.w3.org/2002/07/owl#> \n INSERT DATA {\n      <${o}> a lbd:PartialProject ;\n      lbd:hasProjectUri <${o}>;\n      lbd:hasProjectId "${t}";\n      lbd:hasLocalArtefactRegistry <${o}artefactRegistry.ttl> .\n    }`;await E(a,o,r);for(const t of e){const e=`\nprefix ldp: <http://www.w3.org/ns/ldp#> \nprefix lbd: <https://lbdserver.org/vocabulary#>\nprefix dcat: <http://www.w3.org/ns/dcat#>\nprefix owl: <http://www.w3.org/2002/07/owl#> \n INSERT DATA {\n        <${o}> lbd:hasMember <${t}> .\n      }`;await E(e,o,r)}}}},55877:(t,e,r)=>{var n=r(23570),o=r(71171),a=o;a.v1=n,a.v4=o,t.exports=a},45327:t=>{for(var e=[],r=0;r<256;++r)e[r]=(r+256).toString(16).substr(1);t.exports=function(t,r){var n=r||0,o=e;return[o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]]].join("")}},85217:t=>{var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var r=new Uint8Array(16);t.exports=function(){return e(r),r}}else{var n=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}},23570:(t,e,r)=>{var n,o,a=r(85217),s=r(45327),i=0,c=0;t.exports=function(t,e,r){var l=e&&r||0,d=e||[],p=(t=t||{}).node||n,f=void 0!==t.clockseq?t.clockseq:o;if(null==p||null==f){var u=a();null==p&&(p=n=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==f&&(f=o=16383&(u[6]<<8|u[7]))}var w=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:c+1,y=w-i+(g-c)/1e4;if(y<0&&void 0===t.clockseq&&(f=f+1&16383),(y<0||w>i)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=w,c=g,o=f;var h=(1e4*(268435455&(w+=122192928e5))+g)%4294967296;d[l++]=h>>>24&255,d[l++]=h>>>16&255,d[l++]=h>>>8&255,d[l++]=255&h;var b=w/4294967296*1e4&268435455;d[l++]=b>>>8&255,d[l++]=255&b,d[l++]=b>>>24&15|16,d[l++]=b>>>16&255,d[l++]=f>>>8|128,d[l++]=255&f;for(var v=0;v<6;++v)d[l+v]=p[v];return e||s(d)}},71171:(t,e,r)=>{var n=r(85217),o=r(45327);t.exports=function(t,e,r){var a=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var i=0;i<16;++i)e[a+i]=s[i];return e||o(s)}}}]);